[2026-02-15 02:04:34 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-15 02:04:40 ERR] Ocurrió un error al inicializar la base de datos {"SourceContext":"Program"}
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5436
 ---> System.Net.Sockets.SocketException (10061): No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\IN6AM\CrediExpress\CrediExpress\authentication-service\auth-service\src\AuthService.Api\Program.cs:line 131
[2026-02-15 02:05:03 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-15 02:05:08 ERR] Ocurrió un error al inicializar la base de datos {"SourceContext":"Program"}
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5436
 ---> System.Net.Sockets.SocketException (10061): No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\IN6AM\CrediExpress\CrediExpress\authentication-service\auth-service\src\AuthService.Api\Program.cs:line 131
[2026-02-15 02:36:48 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-15 02:36:52 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-15 02:36:53 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-15 02:36:53 INF] API de AuthService está ejecutándose en http://localhost:5222. Endpoint de salud: http://localhost:5222/api/v1/health {"SourceContext":"Program"}
[2026-02-15 02:39:00 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJCDML8B9SV:00000001","RequestPath":"/api/v1/health","ConnectionId":"0HNJCDML8B9SV"}
[2026-02-15 02:39:02 INF] HTTP GET /api/v1/health responded 200 in 1304.1479 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJCDML8B9SV:00000001","ConnectionId":"0HNJCDML8B9SV"}
[2026-02-15 02:41:11 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-15 02:41:12 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-15 02:41:12 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-15 02:41:12 INF] API de AuthService está ejecutándose en http://localhost:5222. Endpoint de salud: http://localhost:5222/api/v1/health {"SourceContext":"Program"}
[2026-02-15 12:58:36 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-15 12:58:37 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-15 12:58:37 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-15 12:58:37 INF] API de AuthService está ejecutándose en http://localhost:5222. Endpoint de salud: http://localhost:5222/api/v1/health {"SourceContext":"Program"}
[2026-02-15 12:58:49 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJCOH0FAUON:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJCOH0FAUON"}
[2026-02-15 12:58:49 INF] HTTP POST /api/v1/auth/verify-email responded 415 in 406.9586 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJCOH0FAUON:00000001","ConnectionId":"0HNJCOH0FAUON"}
[2026-02-15 12:59:22 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 256.7190 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJCOH0FAUON:00000002","ConnectionId":"0HNJCOH0FAUON"}
[2026-02-15 13:03:35 INF] HTTP GET /api/v1/health responded 200 in 24.0310 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJCOH0FAUOP:00000001","ConnectionId":"0HNJCOH0FAUOP"}
[2026-02-15 13:26:37 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-15 13:26:37 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-15 13:26:38 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-15 13:26:38 INF] API de AuthService está ejecutándose en http://localhost:5222. Endpoint de salud: http://localhost:5222/api/v1/health {"SourceContext":"Program"}
[2026-02-15 13:26:43 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJCP0JB0949:00000001","RequestPath":"/api/v1/auth/register/","ConnectionId":"0HNJCP0JB0949"}
[2026-02-15 13:26:43 INF] HTTP POST /api/v1/auth/register/ responded 404 in 20.0221 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJCP0JB0949:00000001","ConnectionId":"0HNJCP0JB0949"}
